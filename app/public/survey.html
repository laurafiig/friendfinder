<!DOCTYPE html>
<html>
<head>
	<title>Friend Finder</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<link rel="stylesheet" type="text/css" href="survey.css">
</head>
<body>
<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
	<div class="modal-dialog">
		<!-- Modal content-->
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Best Match</h4>
			</div>
			<div class="modal-body">
				<p id="friend"></p>
				<div id="pic"></div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>	
	<br>
	<div class="container">
		<div class="row">
			<div class="col-md-10">
					<h2>SURVEY QUESTIONS</h2>
					<hr>
			</div>
			<div class="col-md-2">
			<a href="/.."><button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-home"></span> Home</button></a>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<form>
					<h2>About You</h2>
					<div class="form-group">
						<label for="name">Your name:</label>
						<input type="text" class="form-control" id="name" required>
					</div>
					<div class="form-group">
						<label for="photo">Your Photo:</label>
						<input type="text" class="form-control" id="photo" required>
					</div>
					<hr>
					<div class="form-group">
					  <h3>Question 1:</h3>
					  <label for="sel1">I enjoy an active healthy lifestyle.</label>
					  <select class="form-control" id="sel1">
					    <option>1(Disagree)</option>
					    <option>2</option>
					    <option>3</option>
					    <option>4</option>
					    <option>5(Agree)</option>
					  </select>
					</div>
					<div class="form-group">
					  <h3>Question 2:</h3>
					  <label for="sel2">I love anything geeky.</label>
					  <select class="form-control" id="sel2">
					    <option>1(Disagree)</option>
					    <option>2</option>
					    <option>3</option>
					    <option>4</option>
					    <option>5(Agree)</option>
					  </select>
					</div>
					<div class="form-group">
					  <h3>Question 3:</h3>
					  <label for="sel3">I would like to travel the world.</label>
					  <select class="form-control" id="sel3">
					    <option>1(Disagree)</option>
					    <option>2</option>
					    <option>3</option>
					    <option>4</option>
					    <option>5(Agree)</option>
					  </select>
					</div>
					<div class="form-group">
					  <h3>Question 4:</h3>
					  <label for="sel4">I am not upset when things don't go my way.</label>
					  <select class="form-control" id="sel4">
					    <option>1(Disagree)</option>
					    <option>2</option>
					    <option>3</option>
					    <option>4</option>
					    <option>5(Agree)</option>
					  </select>
					</div>
					<div class="form-group">
					  <h3>Question 5:</h3>
					  <label for="sel5">I love to shop.</label>
					  <select class="form-control" id="sel5">
					    <option>1(Disagree)</option>
					    <option>2</option>
					    <option>3</option>
					    <option>4</option>
					    <option>5(Agree)</option>
					  </select>
					</div>
					<div class="form-group">
					  <h3>Question 6:</h3>
					  <label for="sel6">I like to stay out all night. </label>
					  <select class="form-control" id="sel6">
					    <option>1(Disagree)</option>
					    <option>2</option>
					    <option>3</option>
					    <option>4</option>
					    <option>5(Agree)</option>
					  </select>
					</div>
					<div class="form-group">
					  <h3>Question 7:</h3>
					  <label for="sel7">I like to try new things.</label>
					  <select class="form-control" id="sel7">
					    <option>1(Disagree)</option>
					    <option>2</option>
					    <option>3</option>
					    <option>4</option>
					    <option>5(Agree)</option>
					  </select>
					</div>
					<div class="form-group">
					  <h3>Question 8:</h3>
					  <label for="sel8">I like to plan things out to the smallest detail.</label>
					  <select class="form-control" id="sel8">
					    <option>1(Disagree)</option>
					    <option>2</option>
					    <option>3</option>
					    <option>4</option>
					    <option>5(Agree)</option>
					  </select>
					</div>
					<div class="form-group">
					  <h3>Question 9:</h3>
					  <label for="sel9">I am an animal lover.</label>
					  <select class="form-control" id="sel9">
					    <option>1(Disagree)</option>
					    <option>2</option>
					    <option>3</option>
					    <option>4</option>
					    <option>5(Agree)</option>
					  </select>
					</div>
					<div class="form-group">
					  <h3>Question 10:</h3>
					  <label for="sel10">I am an extrovert.</label>
					  <select class="form-control" id="sel10">
					    <option>1(Disagree)</option>
					    <option>2</option>
					    <option>3</option>
					    <option>4</option>
					    <option>5(Agree)</option>
					  </select>
					</div>					
					<hr>
					<button type="submit" class="btn btn-primary submit" data-toggle="modal" data-target="#myModal">Submit</button>
				</form>				
			</div>
		</div>
	</div>
	<br>
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<a href="/api/friends">API Friends List</a> | 
				<a href="https://github.com/laurafiig/friendfinder">GitHub Repo</a>
			</div>
		</div>
	</div>
</body>
</html>

<!-- CODE HANDLES HOW FORM DATA IS SENT TO OUR SERVER -->
<script type="text/javascript">
	// on submit, grab data, sends a post request to api
	$(".submit").on("click", function() {
		// check for empty field
		if ($("#name").val() == "" || $("#photo").val() == "") {
			alert("Please fill out all fields.")
			return false;
		} else {
			// input to variable
			var newfriend = {
				name:$("#name").val().trim(),
				photo:$("#photo").val().trim(),
				scores:[
				parseInt($("#sel1").val()),
				parseInt($("#sel2").val()),
				parseInt($("#sel3").val()),
				parseInt($("#sel4").val()),
				parseInt($("#sel5").val()),
				parseInt($("#sel6").val()),
				parseInt($("#sel7").val()),
				parseInt($("#sel8").val()),
				parseInt($("#sel9").val()),
				parseInt($("#sel10").val())
				]
			}
				//console.log(newfriend);
			// send object to url, callback is the response of the server.
			var currentURL = window.location.origin;
			$.post(currentURL + "/api/friends", newfriend,
			function(data) {
				// set data and call modal
				$("#pic").html('<img src='+data.photo+'>')
				$("#friend").text(data.name)
				$("#myModal").modal()
				// Clear the form when submitting
				$("#name").val("");
				$("#photo").val("");
				$("#sel1").val("");
				$("#sel2").val("");
				$("#sel3").val("");
				$("#sel4").val("");
				$("#sel5").val("");
				$("#sel6").val("");
				$("#sel7").val("");
				$("#sel8").val("");
				$("#sel9").val("");
				$("#sel10").val("");
			});  // post
			return false;
	}  //else
	});  //submit
</script>